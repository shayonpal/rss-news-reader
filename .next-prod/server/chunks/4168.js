exports.id=4168,exports.ids=[4168],exports.modules={8359:()=>{},3739:()=>{},9663:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},4247:(e,s,r)=>{Promise.resolve().then(r.bind(r,5999)),Promise.resolve().then(r.bind(r,611)),Promise.resolve().then(r.bind(r,2750)),Promise.resolve().then(r.bind(r,6315)),Promise.resolve().then(r.bind(r,1062))},2414:(e,s,r)=>{Promise.resolve().then(r.bind(r,6507))},5303:()=>{},6507:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});var t=r(326);function a({error:e,reset:s}){return(0,t.jsxs)("div",{className:"flex min-h-screen flex-col items-center justify-center",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Something went wrong!"}),t.jsx("button",{onClick:()=>s(),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Try again"})]})}},611:(e,s,r)=>{"use strict";r.d(s,{RecoveryProvider:()=>M});var t=r(326),a=r(7577),i=r(3864),n=r(1952);class o{constructor(e,s,r){this.supabase=(0,n.eI)(e,s),this.progressCallback=r}async discoverLegacyDatabases(){this.updateProgress("discovery","Scanning for legacy databases...",0);let e=[];try{for(let s of(await indexedDB.databases()))if(s.name&&this.isRssReaderDatabase(s.name))try{let r=await this.inspectLegacyDatabase(s.name);r&&e.push(r)}catch(e){console.warn(`Failed to inspect database ${s.name}:`,e)}return this.updateProgress("discovery",`Found ${e.length} legacy databases`,100),e}catch(e){return console.error("Failed to discover legacy databases:",e),this.updateProgress("discovery","Failed to discover databases",0,[e instanceof Error?e.message:"Unknown error"]),[]}}isRssReaderDatabase(e){return["ShayonNewsDB","RSSReader","NewsReader","FeedReader","InoreaderDB","rss-news-reader"].some(s=>e.toLowerCase().includes(s.toLowerCase()))}async inspectLegacyDatabase(e){try{let s=new i.ZP(e);await s.open();let r=s.tables.map(e=>e.name),t={};for(let e of s.tables)try{t[e.name]=await e.count()}catch(s){console.warn(`Failed to count records in ${e.name}:`,s),t[e.name]=0}let a=this.estimateDatabaseSize(t);return s.close(),{name:e,version:s.verno,estimatedSize:a,lastModified:new Date,tables:r,recordCounts:t}}catch(s){return console.error(`Failed to inspect database ${e}:`,s),null}}estimateDatabaseSize(e){let s={articles:2e3,feeds:500,folders:200,users:1e3,summaries:5e3,pendingActions:100,apiUsage:50,userPreferences:1e3},r=0;for(let[t,a]of Object.entries(e))r+=a*(s[t]||500);return r}async extractFromLegacyDatabase(e){this.updateProgress("extraction",`Extracting data from ${e}...`,0);let s={users:[],feeds:[],articles:[],folders:[]};try{let r=new i.ZP(e);await r.open();let t=r.tables.map(e=>e.name),a=0;for(let e of t)try{let i=r.table(e),n=await i.toArray();switch(e){case"articles":s.articles=n.map(this.mapToLegacyArticle);break;case"feeds":s.feeds=n.map(this.mapToLegacyFeed);break;case"folders":s.folders=n.map(this.mapToLegacyFolder)}a++,this.updateProgress("extraction",`Extracted ${e}`,a/t.length*100)}catch(s){console.warn(`Failed to extract from table ${e}:`,s),this.updateProgress("extraction",`Failed to extract ${e}`,0,[s instanceof Error?s.message:"Unknown error"])}return 0===s.users.length&&s.users.push({id:"legacy-user",email:"legacy@migration.local",inoreader_id:void 0,preferences:{},created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),r.close(),this.updateProgress("extraction",`Extracted ${s.articles.length} articles, ${s.feeds.length} feeds`,100),s}catch(s){throw console.error(`Failed to extract from database ${e}:`,s),this.updateProgress("extraction","Extraction failed",0,[s instanceof Error?s.message:"Unknown error"]),s}}mapToLegacyArticle(e){return{id:e.id||`legacy-article-${Date.now()}-${Math.random()}`,feed_id:e.feedId||e.feed_id||"unknown-feed",inoreader_id:e.inoreaderItemId||e.inoreader_id||e.id,title:e.title||"Untitled Article",content:e.content||e.summary||"",url:e.url||e.link||"",published_at:e.publishedAt||e.published_at||new Date().toISOString(),is_read:e.isRead??e.is_read??!1,is_starred:e.isStarred??e.is_starred??!1,author:e.author||"",summary:e.summary||"",created_at:e.createdAt||e.created_at||new Date().toISOString(),updated_at:e.updatedAt||e.updated_at||new Date().toISOString()}}mapToLegacyFeed(e){return{id:e.id||`legacy-feed-${Date.now()}-${Math.random()}`,user_id:e.userId||e.user_id||"legacy-user",inoreader_id:e.inoreaderFeedId||e.inoreader_id||e.id,title:e.title||"Untitled Feed",url:e.url||e.feedUrl||"",folder_id:e.folderId||e.folder_id||null,unread_count:e.unreadCount||e.unread_count||0,icon_url:e.iconUrl||e.icon_url||"",created_at:e.createdAt||e.created_at||new Date().toISOString(),updated_at:e.updatedAt||e.updated_at||new Date().toISOString()}}mapToLegacyFolder(e){return{id:e.id||`legacy-folder-${Date.now()}-${Math.random()}`,user_id:e.userId||e.user_id||"legacy-user",inoreader_id:e.inoreaderFolderId||e.inoreader_id||e.id,name:e.title||e.name||"Untitled Folder",parent_id:e.parentId||e.parent_id||null,created_at:e.createdAt||e.created_at||new Date().toISOString()}}async uploadToSupabase(e){this.updateProgress("upload","Uploading data to Supabase...",0);let s=e.users.length+e.feeds.length+e.articles.length+e.folders.length,r=0;try{e.users.length>0&&(await this.batchUpload("users",e.users,50),r+=e.users.length,this.updateProgress("upload","Uploaded users",r/s*100)),e.folders.length>0&&(await this.batchUpload("folders",e.folders,50),r+=e.folders.length,this.updateProgress("upload","Uploaded folders",r/s*100)),e.feeds.length>0&&(await this.batchUpload("feeds",e.feeds,50),r+=e.feeds.length,this.updateProgress("upload","Uploaded feeds",r/s*100)),e.articles.length>0&&(await this.batchUpload("articles",e.articles,25),r+=e.articles.length,this.updateProgress("upload","Uploaded articles",r/s*100)),this.updateProgress("upload","Upload completed successfully",100)}catch(e){throw console.error("Failed to upload to Supabase:",e),this.updateProgress("upload","Upload failed",0,[e instanceof Error?e.message:"Unknown error"]),e}}async batchUpload(e,s,r){for(let t=0;t<s.length;t+=r){let a=s.slice(t,t+r);try{let{error:s}=await this.supabase.from(e).upsert(a,{onConflict:"inoreader_id"});if(s)throw console.error(`Failed to upload batch to ${e}:`,s),Error(`Failed to upload batch to ${e}: ${s.message}`);await new Promise(e=>setTimeout(e,100))}catch(s){throw console.error(`Batch upload failed for ${e}:`,s),s}}}async verifyMigration(e){this.updateProgress("verification","Verifying migration...",0);try{let[s,r,t,a]=await Promise.all([this.supabase.from("users").select("*",{count:"exact",head:!0}),this.supabase.from("feeds").select("*",{count:"exact",head:!0}),this.supabase.from("articles").select("*",{count:"exact",head:!0}),this.supabase.from("folders").select("*",{count:"exact",head:!0})]),i={users:(s.count||0)>=e.users.length,feeds:(r.count||0)>=e.feeds.length,articles:(t.count||0)>=e.articles.length,folders:(a.count||0)>=e.folders.length},n=Object.values(i).every(e=>e);return this.updateProgress("verification",n?"Migration verified successfully":"Migration verification failed",100,n?[]:["Record counts do not match expected values"]),n}catch(e){return console.error("Failed to verify migration:",e),this.updateProgress("verification","Verification failed",0,[e instanceof Error?e.message:"Unknown error"]),!1}}async cleanupLegacyDatabases(e){this.updateProgress("cleanup","Cleaning up legacy databases...",0);let s=0;for(let r of e)try{await new Promise((e,s)=>{let t=indexedDB.deleteDatabase(r);t.onsuccess=()=>e(),t.onerror=()=>s(t.error),t.onblocked=()=>{console.warn(`Database ${r} is blocked from deletion`),e()}}),s++,this.updateProgress("cleanup",`Cleaned up ${r}`,s/e.length*100)}catch(e){console.warn(`Failed to cleanup database ${r}:`,e),this.updateProgress("cleanup",`Failed to cleanup ${r}`,0,[e instanceof Error?e.message:"Unknown error"])}this.updateProgress("cleanup",`Cleanup completed (${s}/${e.length} databases)`,100)}async performMigration(e){let s=Date.now(),r={success:!1,migratedData:{users:0,feeds:0,articles:0,folders:0},errors:[],duration:0};try{let s={users:[],feeds:[],articles:[],folders:[]};for(let t of e)try{let e=await this.extractFromLegacyDatabase(t.name);s.users.push(...e.users),s.feeds.push(...e.feeds),s.articles.push(...e.articles),s.folders.push(...e.folders)}catch(e){r.errors.push(`Failed to extract from ${t.name}: ${e instanceof Error?e.message:"Unknown error"}`)}s.users=this.removeDuplicates(s.users,"id"),s.feeds=this.removeDuplicates(s.feeds,"inoreader_id"),s.articles=this.removeDuplicates(s.articles,"inoreader_id"),s.folders=this.removeDuplicates(s.folders,"inoreader_id"),await this.uploadToSupabase(s),await this.verifyMigration(s)?(r.success=!0,r.migratedData={users:s.users.length,feeds:s.feeds.length,articles:s.articles.length,folders:s.folders.length}):r.errors.push("Migration verification failed")}catch(e){r.errors.push(`Migration failed: ${e instanceof Error?e.message:"Unknown error"}`)}return r.duration=Date.now()-s,r}removeDuplicates(e,s){let r=new Set;return e.filter(e=>{let t=e[s];return!r.has(t)&&(r.add(t),!0)})}updateProgress(e,s,r,t=[]){this.progressCallback&&this.progressCallback({phase:e,currentStep:s,progress:r,totalRecords:0,processedRecords:0,errors:t})}}function d(e){return new o("https://rgfxyraamghqnechkppg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJnZnh5cmFhbWdocW5lY2hrcHBnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI2ODg5NzAsImV4cCI6MjA2ODI2NDk3MH0.hqoXq2YAs6cc96d0baVjZWVdmDW0qytCIHjA-YffSdk",e)}var l=r(1664),c=r(8958),u=r(4019),m=r(1223);let h=c.fC;c.xz;let p=c.h_;c.x8;let f=a.forwardRef(({className:e,...s},r)=>t.jsx(c.aV,{ref:r,className:(0,m.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));f.displayName=c.aV.displayName;let g=a.forwardRef(({className:e,children:s,...r},a)=>(0,t.jsxs)(p,{children:[t.jsx(f,{}),(0,t.jsxs)(c.VY,{ref:a,className:(0,m.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[s,(0,t.jsxs)(c.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[t.jsx(u.Z,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));g.displayName=c.VY.displayName;let x=({className:e,...s})=>t.jsx("div",{className:(0,m.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});x.displayName="DialogHeader";let y=a.forwardRef(({className:e,...s},r)=>t.jsx(c.Dx,{ref:r,className:(0,m.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));y.displayName=c.Dx.displayName;let b=a.forwardRef(({className:e,...s},r)=>t.jsx(c.dk,{ref:r,className:(0,m.cn)("text-sm text-muted-foreground",e),...s}));b.displayName=c.dk.displayName;var v=r(7273);let j=a.forwardRef(({className:e,value:s,...r},a)=>t.jsx(v.fC,{ref:a,className:(0,m.cn)("relative h-2 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:t.jsx(v.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));j.displayName=v.fC.displayName;let w=(0,r(9360).j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function N({className:e,variant:s,...r}){return t.jsx("div",{className:(0,m.cn)(w({variant:s}),e),...r})}var S=r(8307),D=r(1540),P=r(3685),C=r(165),_=r(8091),k=r(8319),I=r(5002),F=r(8998),$=r(361),U=r(1291);function A({open:e,onClose:s,onSuccess:r}){let[i,n]=(0,a.useState)("discovery"),[o,c]=(0,a.useState)([]),[u,m]=(0,a.useState)(new Set),[p,f]=(0,a.useState)(null),[v,w]=(0,a.useState)(null),[A,M]=(0,a.useState)(null),[R,z]=(0,a.useState)(!1),L=e=>{let s=new Set(u);s.has(e)?s.delete(e):s.add(e),m(s)},Z=async()=>{if(0!==u.size){z(!0),M(null),n("migrate");try{let e=d(e=>{f(e)}),s=o.filter(e=>u.has(e.name)),t=await e.performMigration(s);w(t),t.success&&r(t),n("complete")}catch(e){M(e instanceof Error?e.message:"Migration failed")}finally{z(!1)}}},O=e=>{if(0===e)return"0 B";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["B","KB","MB","GB"][s]},T=e=>{switch(e){case"discovery":return t.jsx(S.Z,{className:"w-4 h-4"});case"extraction":return t.jsx(D.Z,{className:"w-4 h-4"});case"upload":return t.jsx(P.Z,{className:"w-4 h-4"});case"verification":return t.jsx(C.Z,{className:"w-4 h-4"});case"cleanup":return t.jsx(_.Z,{className:"w-4 h-4"});default:return t.jsx(k.Z,{className:"w-4 h-4"})}};return t.jsx(h,{open:e,onOpenChange:s,children:(0,t.jsxs)(g,{className:"max-w-2xl",children:[(0,t.jsxs)(x,{children:[(0,t.jsxs)(y,{className:"flex items-center gap-2",children:[t.jsx(k.Z,{className:"w-5 h-5"}),"Data Recovery"]}),t.jsx(b,{children:"Recover your articles and feeds from previous sessions"})]}),"discovery"===i&&t.jsx("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"text-center py-8",children:[t.jsx(S.Z,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground animate-pulse"}),t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Scanning for Legacy Data"}),t.jsx("p",{className:"text-muted-foreground",children:"Looking for existing RSS reader data in your browser..."}),p&&(0,t.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[T(p.phase),t.jsx("span",{className:"text-sm",children:p.currentStep})]}),t.jsx(j,{value:p.progress,className:"w-full"})]})]})}),"confirm"===i&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Found Legacy Data"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Select which databases to recover data from:"})]}),t.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:o.map(e=>t.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${u.has(e.name)?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>L(e.name),children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(k.Z,{className:"w-4 h-4"}),t.jsx("span",{className:"font-medium",children:e.name}),(0,t.jsxs)(N,{variant:"secondary",className:"text-xs",children:["v",e.version]})]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[t.jsx(I.Z,{className:"w-3 h-3"}),t.jsx("span",{children:O(e.estimatedSize)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[t.jsx(F.Z,{className:"w-3 h-3"}),t.jsx("span",{children:e.lastModified.toLocaleDateString()})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-xs",children:[e.recordCounts.articles&&(0,t.jsxs)("span",{children:[e.recordCounts.articles," articles"]}),e.recordCounts.feeds&&(0,t.jsxs)("span",{children:[e.recordCounts.feeds," feeds"]}),e.recordCounts.folders&&(0,t.jsxs)("span",{children:[e.recordCounts.folders," folders"]})]})]})]}),t.jsx("div",{className:"ml-4",children:t.jsx("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center ${u.has(e.name)?"bg-primary border-primary":"border-border"}`,children:u.has(e.name)&&t.jsx($.Z,{className:"w-3 h-3 text-primary-foreground"})})})]})},e.name))}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx(l.z,{variant:"outline",onClick:s,children:"Cancel"}),(0,t.jsxs)(l.z,{onClick:Z,disabled:0===u.size,children:["Recover Data (",u.size," database",1!==u.size?"s":"",")"]})]})]}),"migrate"===i&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-center py-4",children:[t.jsx("div",{className:"w-12 h-12 mx-auto mb-4 border-2 border-primary rounded-full flex items-center justify-center",children:p&&T(p.phase)}),t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Migrating Data"}),t.jsx("p",{className:"text-muted-foreground",children:"This may take a few minutes..."})]}),p&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm font-medium capitalize",children:p.phase}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[Math.round(p.progress),"%"]})]}),t.jsx(j,{value:p.progress,className:"w-full"}),t.jsx("div",{className:"text-sm text-muted-foreground text-center",children:p.currentStep}),p.errors.length>0&&t.jsx("div",{className:"space-y-1",children:p.errors.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-destructive",children:[t.jsx(U.Z,{className:"w-3 h-3"}),e]},s))})]})]}),"complete"===i&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-center py-4",children:[t.jsx("div",{className:`w-12 h-12 mx-auto mb-4 rounded-full flex items-center justify-center ${v?.success?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:v?.success?t.jsx($.Z,{className:"w-6 h-6"}):t.jsx(U.Z,{className:"w-6 h-6"})}),t.jsx("h3",{className:"text-lg font-semibold mb-2",children:v?.success?"Migration Complete!":"Migration Failed"}),t.jsx("p",{className:"text-muted-foreground",children:v?.success?"Your data has been successfully recovered and migrated.":"There was an error during the migration process."})]}),v&&(0,t.jsxs)("div",{className:"space-y-3",children:[v.success&&(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[t.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Migration Summary"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-green-600",children:"Users:"})," ",v.migratedData.users]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-green-600",children:"Feeds:"})," ",v.migratedData.feeds]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-green-600",children:"Articles:"})," ",v.migratedData.articles]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-green-600",children:"Folders:"})," ",v.migratedData.folders]})]}),(0,t.jsxs)("div",{className:"mt-2 text-sm text-green-600",children:["Completed in ",(e=>{let s=Math.floor(e/1e3),r=Math.floor(s/60),t=Math.floor(r/60);return t>0?`${t}h ${r%60}m ${s%60}s`:r>0?`${r}m ${s%60}s`:`${s}s`})(v.duration)]})]}),v.errors.length>0&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[t.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"Errors"}),t.jsx("div",{className:"space-y-1",children:v.errors.map((e,s)=>(0,t.jsxs)("div",{className:"text-sm text-red-600",children:["• ",e]},s))})]})]}),A&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-red-800",children:[t.jsx(U.Z,{className:"w-4 h-4"}),t.jsx("span",{className:"font-semibold",children:"Error"})]}),t.jsx("p",{className:"text-red-600 text-sm mt-1",children:A})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[!v?.success&&t.jsx(l.z,{variant:"outline",onClick:()=>n("discovery"),children:"Try Again"}),t.jsx(l.z,{onClick:s,className:"ml-auto",children:v?.success?"Continue":"Close"})]})]})]})})}function M({children:e}){let{shouldShowRecovery:s,isChecking:r,handleRecoverySuccess:i,handleRecoveryClose:n}=function(){let[e,s]=(0,a.useState)(!1),[r,t]=(0,a.useState)(!0),[i,n]=(0,a.useState)([]),o=()=>{localStorage.setItem("legacy-recovery-seen","true"),s(!1)};return{shouldShowRecovery:e,isChecking:r,legacyDatabases:i,handleRecoverySuccess:e=>{o(),console.log("Recovery completed successfully:",e)},handleRecoveryClose:()=>{o()},checkForLegacyData:async()=>{try{if(localStorage.getItem("legacy-recovery-seen")){t(!1);return}let e=d(),r=await e.discoverLegacyDatabases();n(r);let a=r.some(e=>(e.recordCounts.articles||0)>0||(e.recordCounts.feeds||0)>0);s(a)}catch(e){console.error("Failed to check for legacy data:",e)}finally{t(!1)}}}}();return(0,t.jsxs)(t.Fragment,{children:[e,!r&&t.jsx(A,{open:s,onClose:n,onSuccess:i})]})}},2750:(e,s,r)=>{"use strict";function t(){return null}r.d(s,{PWADetector:()=>t}),r(7577)},6315:(e,s,r)=>{"use strict";function t(){return null}r.d(s,{PWAProvider:()=>t}),r(7577)},1062:(e,s,r)=>{"use strict";r.d(s,{ThemeProvider:()=>a}),r(7577);var t=r(6900);function a(){return(0,t.H)(e=>e.theme),null}},1664:(e,s,r)=>{"use strict";r.d(s,{z:()=>l});var t=r(326),a=r(7577),i=r(4214),n=r(9360),o=r(1223);let d=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef(({className:e,variant:s,size:r,asChild:a=!1,...n},l)=>{let c=a?i.g7:"button";return t.jsx(c,{className:(0,o.cn)(d({variant:s,size:r,className:e})),ref:l,type:n.type||"button",...n,style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation",...n.style}})});l.displayName="Button"},6900:(e,s,r)=>{"use strict";r.d(s,{H:()=>i});var t=r(8408),a=r(5251);let i=(0,t.U)()((0,a.tJ)((e,s)=>({theme:"system",setTheme:s=>e({theme:s}),isSidebarOpen:!1,setSidebarOpen:s=>e({isSidebarOpen:s}),toggleSidebar:()=>e(e=>({isSidebarOpen:!e.isSidebarOpen})),isArticleOpen:!1,selectedArticleId:null,setSelectedArticle:s=>e({selectedArticleId:s,isArticleOpen:null!==s}),isLoading:!1,setLoading:s=>e({isLoading:s}),notification:null,showNotification:(s,r)=>e({notification:{message:s,type:r,visible:!0}}),hideNotification:()=>e({notification:null})}),{name:"ui-store",partialize:e=>({theme:e.theme})}))},1223:(e,s,r)=>{"use strict";r.d(s,{cn:()=>i});var t=r(1135),a=r(1009);function i(...e){return(0,a.m6)((0,t.W)(e))}},7629:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(8570).createProxy)(String.raw`/Users/shayon/DevProjects/rss-news-reader/src/app/error.tsx#default`)},2887:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>p,generateViewport:()=>h,metadata:()=>m});var t=r(9510),a=r(5317),i=r.n(a);r(5023);var n=r(8570);let o=(0,n.createProxy)(String.raw`/Users/shayon/DevProjects/rss-news-reader/src/components/pwa-provider.tsx#PWAProvider`),d=(0,n.createProxy)(String.raw`/Users/shayon/DevProjects/rss-news-reader/src/components/theme-provider.tsx#ThemeProvider`),l=(0,n.createProxy)(String.raw`/Users/shayon/DevProjects/rss-news-reader/src/components/migration/RecoveryProvider.tsx#RecoveryProvider`),c=(0,n.createProxy)(String.raw`/Users/shayon/DevProjects/rss-news-reader/src/components/pwa-detector.tsx#PWADetector`);var u=r(1032);let m={title:"Shayon's News",description:"A clean, fast, and intelligent RSS reader with AI-powered summaries",manifest:"/reader/manifest.json",icons:{icon:[{url:"/reader/icons/favicon-16x16.png",sizes:"16x16",type:"image/png"},{url:"/reader/icons/favicon-32x32.png",sizes:"32x32",type:"image/png"}],apple:[{url:"/reader/apple-touch-icon.png",sizes:"180x180",type:"image/png"}]},appleWebApp:{capable:!0,statusBarStyle:"black-translucent",title:"Shayon's News"},other:{"mobile-web-app-capable":"yes"}};function h(){return{width:"device-width",initialScale:1,maximumScale:1,userScalable:!1,viewportFit:"cover",themeColor:[{media:"(prefers-color-scheme: light)",color:"#ffffff"},{media:"(prefers-color-scheme: dark)",color:"#000000"}]}}function p({children:e}){return t.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:(0,t.jsxs)("body",{className:i().className,children:[t.jsx(o,{}),t.jsx(d,{}),t.jsx(c,{}),t.jsx(l,{children:t.jsx("div",{id:"root",children:e})}),t.jsx(u.x7,{position:"bottom-center"})]})})}},2523:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});var t=r(9510);function a(){return(0,t.jsxs)("div",{children:[t.jsx("h2",{children:"Not Found"}),t.jsx("p",{children:"Could not find requested resource"})]})}},5023:()=>{}};