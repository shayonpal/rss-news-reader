(()=>{var e={};e.id=1931,e.ids=[1931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},551:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>o,routeModule:()=>x,tree:()=>c}),s(5480),s(2887),s(7629),s(2523);var r=s(3191),a=s(8716),l=s(7922),n=s.n(l),i=s(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(t,d);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5480)),"/Users/shayon/DevProjects/rss-news-reader/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2887)),"/Users/shayon/DevProjects/rss-news-reader/src/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,7629)),"/Users/shayon/DevProjects/rss-news-reader/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,2523)),"/Users/shayon/DevProjects/rss-news-reader/src/app/not-found.tsx"]}],o=["/Users/shayon/DevProjects/rss-news-reader/src/app/page.tsx"],u="/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5934:(e,t,s)=>{Promise.resolve().then(s.bind(s,7203))},1405:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(2881).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},949:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(2881).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},7203:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>E});var r=s(326),a=s(7577),l=s.n(a),n=s(5047),i=s(2149),d=s(8172),c=s(6900),o=s(6551),u=s(2881);let m=(0,u.Z)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),x=(0,u.Z)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),h=(0,u.Z)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);var p=s(6754),f=s(7506),g=s(1405);function v({selectedFeedId:e,onFeedSelect:t}){let s=(0,n.useRouter)(),{feeds:l,feedsWithCounts:u,totalUnreadCount:v,loadFeedHierarchy:j}=(0,i.useFeedStore)(),{isSyncing:y,lastSyncTime:b,performFullSync:N,syncError:w,syncProgress:k,syncMessage:C,rateLimit:S}=(0,d.i)(),{theme:R,setTheme:A}=(0,c.H)(),{readStatusFilter:q}=(0,o.useArticleStore)(),F=(0,a.useRef)(null);return(0,a.useRef)(0),(0,r.jsxs)("div",{className:"h-full border-r bg-background flex flex-col pt-[env(safe-area-inset-top)]",children:[(0,r.jsxs)("div",{className:"p-4 border-b",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Feeds"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>{let e=["light","dark","system"],t=(e.indexOf(R)+1)%e.length;A(e[t])},className:"p-2 rounded hover:bg-muted transition-colors","aria-label":`Current theme: ${R}`,children:(()=>{switch(R){case"light":return r.jsx(m,{className:"h-4 w-4"});case"dark":return r.jsx(x,{className:"h-4 w-4"});default:return r.jsx(h,{className:"h-4 w-4"})}})()}),r.jsx("button",{onClick:()=>s.push("/fetch-stats"),className:"p-2 rounded hover:bg-muted transition-colors","aria-label":"View fetch statistics",children:r.jsx(p.Z,{className:"h-4 w-4"})}),(0,r.jsxs)("button",{onClick:N,disabled:y,className:"p-2 rounded hover:bg-muted disabled:opacity-50 relative","aria-label":y?"Syncing...":"Sync feeds",children:[y?r.jsx(f.Z,{className:"h-4 w-4 animate-spin"}):r.jsx(g.Z,{className:"h-4 w-4"}),y&&k>0&&(0,r.jsxs)("span",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 text-[10px] font-medium",children:[k,"%"]})]})]})]}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:[v," unread articles"]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",ref:F,children:y&&0===l.size?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-4",children:[r.jsx(f.Z,{className:"h-8 w-8 animate-spin text-primary mb-4"}),r.jsx("p",{className:"text-sm font-medium",children:C||"Syncing your feeds..."}),k>0&&(0,r.jsxs)("div",{className:"w-full max-w-xs mt-3",children:[r.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${k}%`}})}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mt-1 text-center",children:[k,"%"]})]})]}):w&&0===l.size?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-4",children:[r.jsx("p",{className:"text-sm text-destructive mb-2",children:"Failed to sync feeds"}),r.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:w}),r.jsx("button",{onClick:N,className:"px-3 py-1 text-sm bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Retry"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:`p-3 cursor-pointer hover:bg-muted/50 ${e?"":"bg-muted font-medium"}`,onClick:()=>t(null),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:"All Articles"}),r.jsx("span",{className:"text-xs bg-primary/10 text-primary px-2 py-0.5 rounded-full",children:v})]})}),0===l.size&&!y&&(0,r.jsxs)("div",{className:"p-4 text-center",children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"No feeds yet"}),r.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Click the Sync button to load your feeds from Inoreader"})]}),Array.from(l.values()).sort((e,t)=>String(e.title||"").localeCompare(String(t.title||""),void 0,{numeric:!0,sensitivity:"base"})).filter(t=>{if(e===t.id)return!0;if("unread"===q){let e=u.get(t.id);return(e?.unreadCount||0)>0}return!0}).map(s=>{let a=u.get(s.id),l=a?.unreadCount||0,n=e===s.id,i=l>0;return r.jsx("div",{className:`p-3 cursor-pointer hover:bg-muted/50 transition-all ${n?"bg-muted font-medium":""} ${i||n?"":"opacity-35 hover:opacity-100"}`,onClick:()=>t(s.id),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"truncate",children:String(s.title||"Untitled Feed")}),l>0&&r.jsx("span",{className:"text-xs bg-primary/10 text-primary px-2 py-0.5 rounded-full",children:l>999?"999+":l})]})},s.id)}),(0,r.jsxs)("div",{className:"p-3 text-xs text-muted-foreground space-y-1",children:[b&&(0,r.jsxs)("div",{children:["Last sync: ",r.jsx("span",{suppressHydrationWarning:!0,children:new Date(b).toLocaleTimeString()})]}),(0,r.jsxs)("div",{children:[l.size," feeds total"]}),S&&(0,r.jsxs)("div",{className:S.used>=.8*S.limit?"text-amber-600":"",children:["API usage: ",S.used,"/",S.limit," calls today",S.used>=.95*S.limit&&r.jsx("span",{className:"text-destructive",children:" (Warning: Near limit!)"})]})]})]})})]})}function j(e){if("string"==typeof e)return e.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/&ldquo;/g,'"').replace(/&rdquo;/g,'"').replace(/&lsquo;/g,"'").replace(/&rsquo;/g,"'").replace(/&hellip;/g,"...").replace(/&mdash;/g,"—").replace(/&ndash;/g,"–").replace(/\s+/g," ").trim();if(null==e)return"";if("object"==typeof e&&"content"in e&&"string"==typeof e.content)return e.content;if("object"==typeof e)try{if("direction"in e&&"string"==typeof e.direction)return console.warn("Found object with direction property, likely corrupted InoreaderContent:",e),JSON.stringify(e);return console.warn("Found unexpected object type, returning empty string:",e),""}catch(e){return console.error("Error processing object data:",e),""}return String(e)}var y=s(3159),b=s(6584),N=s(9514);function w({feedId:e,folderId:t,onArticleClick:s,scrollContainerRef:l}){(0,a.useRef)(null);let n=(0,a.useRef)(null),i=(0,a.useRef)(null),d=(0,a.useRef)(0),c=(0,a.useRef)(!1);(0,a.useRef)(!1);let u=(0,a.useRef)(null);(0,a.useRef)(0);let m=(0,a.useRef)(new Set);(0,a.useRef)(null);let{articles:x,loadingArticles:h,loadingMore:p,articlesError:v,hasMore:w,summarizingArticles:C,loadArticles:S,loadMoreArticles:R,markAsRead:A,markMultipleAsRead:q,toggleStar:F,refreshArticles:M,clearError:P,readStatusFilter:z}=(0,o.useArticleStore)();(0,a.useCallback)(()=>{if(m.current.size>0){let e=Array.from(m.current);m.current.clear(),q(e)}},[q]);let Z=(0,a.useCallback)(e=>{d.current=e.touches[0].clientY},[]),T=(0,a.useCallback)(e=>{let t=e.touches[0].clientY-d.current,s=l?.current;s&&0===s.scrollTop&&t>0&&(c.current=!0)},[l]),_=(0,a.useCallback)(async()=>{let e=l?.current;c.current&&e&&0===e.scrollTop&&await M(),c.current=!1},[M,l]),D=(0,a.useCallback)(async e=>{let t=l?.current,r=t?t.scrollTop:0;sessionStorage.setItem("articleListScroll",r.toString()),e.isRead||await A(e.id),s?.(e.id)},[A,s,l]),$=e=>{if(C.has(e.id))return(0,r.jsxs)("div",{className:"mt-2 space-y-2 animate-pulse",children:[r.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-full"}),r.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-full"}),r.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-3/4"})]});if(e.summary)return r.jsx("div",{className:"mt-2 space-y-2",children:e.summary.split(/\n+/).filter(e=>e.trim()).map((e,t)=>r.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:e.trim()},t))});if(e.fullContent){let t=j(e.fullContent);if(t)return r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-4 mt-2 break-words",children:t})}let t=j(e.content);return t?r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-4 mt-2 break-words",children:t}):r.jsx("p",{className:"text-sm text-muted-foreground italic mt-2",children:"No preview available"})},E=e=>{try{return(0,y.Q)(new Date(e),{addSuffix:!0})}catch{return new Date(e).toLocaleDateString()}};return h&&0===x.size?r.jsx(k,{}):v?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-8",children:[r.jsx("p",{className:"text-muted-foreground mb-4",children:v}),r.jsx("button",{onClick:P,className:"text-sm text-primary hover:underline",children:"Try again"})]}):0===x.size?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-8",children:[r.jsx("p",{className:"text-muted-foreground",children:"No articles found"}),(0,r.jsxs)("button",{onClick:M,className:"mt-4 flex items-center gap-2 text-sm text-primary hover:underline",children:[r.jsx(g.Z,{className:"h-4 w-4"}),"Refresh"]})]}):r.jsx("div",{ref:i,className:"flex-1 overflow-hidden",onTouchStart:Z,onTouchMove:T,onTouchEnd:_,children:(0,r.jsxs)("div",{className:"divide-y divide-border overflow-x-hidden article-list-container",children:[Array.from(x.values()).map(e=>(0,r.jsxs)("article",{"data-article-id":e.id,"data-is-read":e.isRead,ref:t=>{t&&u.current&&!e.isRead&&u.current.observe(t)},className:`relative p-4 sm:p-6 cursor-pointer transition-all duration-300 hover:bg-muted/50 overflow-hidden ${e.isRead?"opacity-70":""}`,onClick:()=>D(e),role:"button",tabIndex:0,onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),D(e))},children:[r.jsx("div",{className:"absolute inset-0 sm:hidden","aria-hidden":"true"}),(0,r.jsxs)("div",{className:"relative space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[r.jsx("h2",{className:`text-base sm:text-lg flex-1 ${e.isRead?"font-normal text-muted-foreground":"font-semibold text-foreground"}`,children:e.title}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[e.summary&&r.jsx("span",{className:"text-yellow-500 text-sm",title:"AI Summary Available",children:"⚡"}),!e.summary&&!C.has(e.id)&&r.jsx(b.v,{articleId:e.id,hasSummary:!1,variant:"icon",size:"sm"}),r.jsx(N.d,{onToggleStar:()=>F(e.id),isStarred:e.tags?.includes("starred")||!1,size:"sm"})]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-1 text-xs sm:text-sm text-muted-foreground",children:[r.jsx("span",{className:"font-medium",children:e.feedTitle}),r.jsx("span",{className:"hidden sm:inline",children:"•"}),r.jsx("time",{dateTime:e.publishedAt.toISOString(),suppressHydrationWarning:!0,children:E(e.publishedAt)}),e.author&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("span",{className:"hidden sm:inline",children:"•"}),r.jsx("span",{className:"truncate max-w-[150px]",children:e.author})]})]}),r.jsx("div",{className:"text-sm overflow-hidden",children:$(e)})]})]},e.id)),w&&r.jsx("div",{ref:n,className:"p-8 text-center",children:p&&r.jsx(f.Z,{className:"h-6 w-6 animate-spin mx-auto text-muted-foreground"})})]})})}function k(){return r.jsx("div",{className:"divide-y divide-border animate-pulse",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsxs)("div",{className:"p-4 sm:p-6 space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[r.jsx("div",{className:"h-5 bg-muted rounded w-3/4"}),r.jsx("div",{className:"h-4 w-4 bg-muted rounded"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-3 bg-muted rounded w-24"}),r.jsx("div",{className:"h-3 bg-muted rounded w-20"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-3 bg-muted rounded w-full"}),r.jsx("div",{className:"h-3 bg-muted rounded w-full"}),r.jsx("div",{className:"h-3 bg-muted rounded w-3/4"})]})]},t))})}var C=s(8393),S=s(7783);function R(){let{readStatusFilter:e,setReadStatusFilter:t}=(0,o.useArticleStore)(),s=[{value:"unread",label:"Unread only",description:"Focus on new content"},{value:"read",label:"Read only",description:"Review previously read articles"},{value:"all",label:"All articles",description:"Complete view of all content"}],a=s.find(t=>t.value===e);return(0,r.jsxs)(S.fC,{children:[r.jsx(S.xz,{asChild:!0,children:(0,r.jsxs)("button",{className:"flex items-center gap-2 px-3 py-1.5 text-sm border rounded-md hover:bg-muted transition-colors","aria-label":`Current filter: ${a?.label}. Click to change filter`,children:[r.jsx("span",{children:a?.label}),r.jsx(C.Z,{className:"h-4 w-4"})]})}),r.jsx(S.Uv,{children:r.jsx(S.VY,{className:"min-w-[200px] bg-background rounded-md shadow-md border p-1 z-50",align:"end",sideOffset:5,children:s.map(s=>(0,r.jsxs)(S.ck,{className:`
                flex flex-col items-start px-3 py-2 text-sm rounded cursor-pointer
                ${e===s.value?"bg-primary text-primary-foreground":"hover:bg-muted"}
              `,onSelect:()=>t(s.value),children:[r.jsx("span",{className:"font-medium",children:s.label}),r.jsx("span",{className:`text-xs ${e===s.value?"text-primary-foreground/80":"text-muted-foreground"}`,children:s.description})]},s.value))})})]})}var A=s(3344);class q{async getArticleCounts(e,t){let s=`${e||"all"}-${t||"all"}`,r=this.cache.get(s);if(r&&Date.now()-r.timestamp<this.CACHE_TTL)return r.counts;let a=await this.fetchCountsFromDatabase(e,t);return this.cache.set(s,{counts:a,timestamp:Date.now(),feedId:e,folderId:t}),a}async fetchCountsFromDatabase(e,t){try{let s=A.OQ.from("articles").select("*",{count:"exact",head:!0});if(e)s=s.eq("feed_id",e);else if(t){let{data:e}=await A.OQ.from("feeds").select("id").eq("folder_id",t),r=e?.map(e=>e.id)||[];if(0===r.length)return{total:0,unread:0,read:0};s=s.in("feed_id",r)}let{count:r}=await s,a=A.OQ.from("articles").select("*",{count:"exact",head:!0}).eq("is_read",!1);if(e)a=a.eq("feed_id",e);else if(t){let{data:e}=await A.OQ.from("feeds").select("id").eq("folder_id",t),s=e?.map(e=>e.id)||[];s.length>0&&(a=a.in("feed_id",s))}let{count:l}=await a;return{total:r||0,unread:l||0,read:(r||0)-(l||0)}}catch(e){return console.error("Failed to fetch article counts:",e),{total:0,unread:0,read:0}}}invalidateCache(e){if(e){let t=[];this.cache.forEach((s,r)=>{(r.includes(e)||r.startsWith("all-"))&&t.push(r)}),t.forEach(e=>this.cache.delete(e))}else this.cache.clear()}getCountDisplay(e,t){switch(t){case"unread":return`${e.unread} unread articles`;case"read":return`${e.read} read articles`;case"all":return`${e.total} total articles (${e.unread} unread)`;default:return`${e.total} articles`}}constructor(){this.cache=new Map,this.CACHE_TTL=3e5}}let F=(e,t,s)=>s?s.title:t?t.title:"Articles";new q;var M=s(1664),P=s(949);let z=(0,u.Z)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);var Z=s(5999);function T({selectedFeedId:e,selectedFolderId:t,isMobile:s=!1,onMenuClick:l,menuIcon:n}){let{readStatusFilter:d,markAllAsRead:c,refreshArticles:u}=(0,o.useArticleStore)(),{getFeed:m,getFolder:x}=(0,i.useFeedStore)(),[h,p]=(0,a.useState)({total:0,unread:0,read:0}),[g,v]=(0,a.useState)(!0),[j,y]=(0,a.useState)(!1),[b,N]=(0,a.useState)(!1),w=(0,a.useRef)(null),k=(0,a.useRef)(new q),C=e?m(e):void 0,S=t?x(t):void 0,[A,T]=(0,a.useState)(!1),_=A?F(d,C,S):"Articles",D=async()=>{if(e&&!j){if(!b){N(!0),w.current=setTimeout(()=>{N(!1)},3e3);return}w.current&&clearTimeout(w.current),N(!1),y(!0);try{await c(e),k.current.invalidateCache(e),await u();let s=await k.current.getArticleCounts(e,t||void 0);p(s),Z.A.success(`Marked all articles as read in ${C?.title||"feed"}`)}catch(e){console.error("Failed to mark all as read:",e),Z.A.error("Failed to mark all articles as read")}finally{y(!1)}}};return(0,r.jsxs)("header",{className:"border-b px-4 md:px-6 py-3 md:py-4 flex items-center justify-between gap-3 pwa-safe-area-top",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s&&l&&r.jsx("button",{onClick:l,className:"p-2 hover:bg-muted rounded-lg flex-shrink-0","aria-label":"Toggle sidebar",children:n}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-semibold break-words",children:_}),r.jsx("p",{className:"text-sm text-muted-foreground",children:!A||g?"Loading counts...":k.current.getCountDisplay(h,d)})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e&&h.unread>0&&r.jsx(M.z,{variant:b?"destructive":"outline",size:"sm",onClick:D,disabled:j,className:b?"gap-1.5 bg-red-500/20 hover:bg-red-500/30 text-red-600 dark:text-red-400 border-red-500/50":"gap-1.5",title:b?"Click again to confirm":"Mark all articles in this feed as read",children:j?(0,r.jsxs)(r.Fragment,{children:[r.jsx(f.Z,{className:"h-3.5 w-3.5 animate-spin"}),r.jsx("span",{className:"hidden sm:inline",children:"Marking..."})]}):b?(0,r.jsxs)(r.Fragment,{children:[r.jsx(P.Z,{className:"h-3.5 w-3.5"}),r.jsx("span",{className:"hidden sm:inline",children:"Confirm?"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(z,{className:"h-3.5 w-3.5"}),r.jsx("span",{className:"hidden sm:inline",children:"Mark All Read"})]})}),r.jsx(R,{})]})]})}class _ extends l().Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){return this.state.hasError?this.props.fallback||(0,r.jsxs)("div",{className:"p-4 text-center",children:[r.jsx("h2",{className:"text-lg font-semibold text-destructive mb-2",children:"Something went wrong"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:this.state.error?.message||"An unexpected error occurred"}),r.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Try again"})]}):this.props.children}}var D=s(4019);let $=(0,u.Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);function E(){let e=(0,n.useRouter)();(0,o.useArticleStore)(e=>e.setReadStatusFilter),(0,a.useRef)(0);let t=(0,a.useRef)(null);(0,a.useRef)(null);let[s,l]=(0,a.useState)(()=>null),[i,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1),m=(0,a.useRef)(null);return(0,r.jsxs)("div",{className:"flex h-screen bg-background relative w-full overflow-hidden",children:[i&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>d(!1)}),r.jsx("div",{className:`
        fixed md:relative inset-y-0 left-0 z-50
        transform ${i?"translate-x-0":"-translate-x-full"}
        md:translate-x-0 transition-transform duration-200 ease-in-out
        w-[280px] md:w-80 h-full
      `,children:r.jsx(_,{fallback:r.jsx("div",{className:"h-full border-r bg-muted/10 p-4",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Feed sidebar error"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Data synced successfully"})]})}),children:r.jsx(v,{selectedFeedId:s,onFeedSelect:e=>{l(e),sessionStorage.setItem("articleListFilter",e||"null"),window.innerWidth<768&&d(!1)},onClose:()=>d(!1)})})}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col min-w-0 h-full overflow-hidden",children:[r.jsx("div",{ref:t,className:"fixed top-0 left-0 right-0 md:left-80 z-30 bg-background border-b transition-transform duration-300 ease-in-out",style:{transform:"translateY(0)"},children:r.jsx(T,{selectedFeedId:s,selectedFolderId:null,isMobile:!0,onMenuClick:()=>d(!i),menuIcon:i?r.jsx(D.Z,{className:"h-5 w-5"}):r.jsx($,{className:"h-5 w-5"})})}),(0,r.jsxs)("div",{ref:m,className:"flex-1 pt-[73px] overflow-y-auto ios-scroll-container relative",children:[r.jsx(w,{feedId:s||void 0,onArticleClick:t=>{e.push(`/article/${encodeURIComponent(t)}`)},scrollContainerRef:m}),!1]})]})]})}s(9256)},9514:(e,t,s)=>{"use strict";s.d(t,{d:()=>n});var r=s(326),a=s(3734),l=s(1707);function n({onToggleStar:e,isStarred:t,size:s="sm",disabled:n=!1}){return r.jsx(l.K,{icon:a.Z,onPress:e,size:s,active:t,activeClassName:"fill-yellow-500 text-yellow-500",label:t?"Unstar":"Star",disabled:n})}},6584:(e,t,s)=>{"use strict";s.d(t,{v:()=>m});var r=s(326),a=s(7577),l=s(4689),n=s(1572),i=s(7506),d=s(6551),c=s(1223),o=s(1902),u=s(1707);function m({articleId:e,hasSummary:t,variant:s="full",size:m="sm",className:x,onSuccess:h}){let[p,f]=(0,a.useState)(!1),[g,v]=(0,a.useState)(null),{generateSummary:j}=(0,d.useArticleStore)(),y=async()=>{f(!0),v(null);try{await j(e,t),h?.()}catch(e){v(e instanceof Error?e.message:"Failed to generate summary"),console.error("Summary generation error:",e)}finally{f(!1)}};return"icon"===s?r.jsx(u.K,{icon:t?l.Z:n.Z,onPress:y,size:m,active:!1,label:t?"Regenerate summary":"Generate AI summary",disabled:p,loading:p,loadingIcon:i.Z,className:x}):r.jsx(o.M,{onPress:y,disabled:p,variant:"default",size:"sm",className:(0,c.cn)("bg-blue-600 hover:bg-blue-700 active:bg-blue-800",x),children:p?(0,r.jsxs)(r.Fragment,{children:[r.jsx(i.Z,{className:"h-4 w-4 animate-spin"}),"Generating..."]}):t?(0,r.jsxs)(r.Fragment,{children:[r.jsx(l.Z,{className:"h-4 w-4"}),"Re-summarize"]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(n.Z,{className:"h-4 w-4"}),"Summarize"]})})}},1707:(e,t,s)=>{"use strict";s.d(t,{K:()=>i});var r=s(326);s(7577);var a=s(1902),l=s(1223);let n={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"};function i({icon:e,onPress:t,size:s="sm",active:i=!1,activeClassName:d,label:c,title:o,disabled:u=!1,loading:m=!1,loadingIcon:x,className:h}){let p=n[s],f=m&&x?x:e;return r.jsx(a.M,{variant:"ghost",size:"icon",onPress:t,disabled:u||m,className:(0,l.cn)("p-1 hover:bg-muted rounded",h),"aria-label":c,title:o||c,children:r.jsx(f,{className:(0,l.cn)(p,m&&"animate-spin",i&&d?d:i?"text-primary":"text-muted-foreground")})})}},1902:(e,t,s)=>{"use strict";s.d(t,{M:()=>i});var r=s(326),a=s(7577),l=s.n(a),n=s(1664);let i=l().forwardRef(({onPress:e,onClick:t,children:s,...l},i)=>{let d=(0,a.useRef)(!1);return r.jsx(n.z,{ref:i,...l,onClick:s=>{if(s.stopPropagation(),d.current){s.preventDefault(),d.current=!1;return}t?t(s):e&&e()},onTouchStart:()=>{d.current=!0},onTouchEnd:s=>{s.preventDefault(),s.stopPropagation(),e?e():t&&t(s),d.current=!1},style:{...l.style,WebkitTouchCallout:"none",WebkitUserSelect:"none",touchAction:"manipulation"},children:s})});i.displayName="IOSButton"},5480:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/shayon/DevProjects/rss-news-reader/src/app/page.tsx#default`)}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[9276,4465,5045,1424,4168,2149,9432],()=>s(551));module.exports=r})();