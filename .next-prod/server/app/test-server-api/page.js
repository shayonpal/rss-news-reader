(()=>{var e={};e.id=8328,e.ids=[8328],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},2297:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>o}),t(3764),t(2887),t(7629),t(2523);var r=t(3191),a=t(8716),i=t(7922),n=t.n(i),l=t(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let o=["",{children:["test-server-api",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3764)),"/Users/shayon/DevProjects/rss-news-reader/src/app/test-server-api/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2887)),"/Users/shayon/DevProjects/rss-news-reader/src/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,7629)),"/Users/shayon/DevProjects/rss-news-reader/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,2523)),"/Users/shayon/DevProjects/rss-news-reader/src/app/not-found.tsx"]}],d=["/Users/shayon/DevProjects/rss-news-reader/src/app/test-server-api/page.tsx"],u="/test-server-api/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/test-server-api/page",pathname:"/test-server-api",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},5043:(e,s,t)=>{Promise.resolve().then(t.bind(t,4714))},4714:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var r=t(326),a=t(7577),i=t(3344);function n(){let[e,s]=(0,a.useState)(null),[t,n]=(0,a.useState)(null),[l,c]=(0,a.useState)(null),[o,d]=(0,a.useState)(null),[u,p]=(0,a.useState)(null),[m,h]=(0,a.useState)(null),x=async()=>{h("sync");try{let e=await fetch("/reader/api/sync",{method:"POST",headers:{"Content-Type":"application/json"}}),t=await e.json();s({status:e.status,data:t}),t.syncId&&y(t.syncId)}catch(e){s({error:e instanceof Error?e.message:"Failed"})}finally{h(null)}},y=async e=>{let s=setInterval(async()=>{try{let t=await fetch(`/reader/api/sync/status/${e}`),r=await t.json();n(r),("completed"===r.status||"failed"===r.status)&&clearInterval(s)}catch(e){clearInterval(s),n({error:"Failed to check status"})}},1e3)},g=async()=>{h("article");try{let{data:e,error:s}=await i.OQ.from("articles").select("id, title, url, content, ai_summary").limit(10);if(s)throw s;if(e&&e.length>0){let s=e[Math.floor(Math.random()*e.length)];p(s)}}catch(e){console.error("Failed to load article:",e)}finally{h(null)}},b=async()=>{if(u){h("content");try{let e=await fetch(`/reader/api/articles/${u.id}/fetch-content`,{method:"POST",headers:{"Content-Type":"application/json"}}),s=await e.json();c({status:e.status,data:s})}catch(e){c({error:e instanceof Error?e.message:"Failed"})}finally{h(null)}}},j=async()=>{if(u){h("summary");try{let e=await fetch(`/reader/api/articles/${u.id}/summarize`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({regenerate:!0})}),s=await e.json();d({status:e.status,data:s})}catch(e){d({error:e instanceof Error?e.message:"Failed"})}finally{h(null)}}};return(0,r.jsxs)("div",{className:"container mx-auto p-8 space-y-6",children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Server API Test Page"}),r.jsx("p",{className:"text-gray-600",children:"Test the US-103 server API endpoints"}),(0,r.jsxs)("div",{className:"border rounded-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Manual Sync"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"POST /api/sync - Trigger server-side sync"}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("button",{onClick:x,disabled:"sync"===m,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:"sync"===m?"Syncing...":"Start Sync"}),e&&r.jsx("pre",{className:"bg-gray-100 p-4 rounded overflow-auto text-xs",children:JSON.stringify(e,null,2)}),t&&(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-semibold",children:"Sync Status:"}),r.jsx("pre",{className:"bg-gray-100 p-4 rounded overflow-auto text-xs",children:JSON.stringify(t,null,2)})]})]})]}),(0,r.jsxs)("div",{className:"border rounded-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Select Test Article"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Load a random article for testing content extraction and summarization"}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("button",{onClick:g,disabled:"article"===m,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:"article"===m?"Loading...":"Load Random Article"}),u&&(0,r.jsxs)("div",{className:"bg-gray-100 p-4 rounded space-y-2",children:[(0,r.jsxs)("p",{children:[r.jsx("strong",{children:"Title:"})," ",u.title]}),(0,r.jsxs)("p",{children:[r.jsx("strong",{children:"ID:"})," ",u.id]}),(0,r.jsxs)("p",{children:[r.jsx("strong",{children:"URL:"})," ",u.url||"No URL"]}),(0,r.jsxs)("p",{children:[r.jsx("strong",{children:"Has Summary:"})," ",u.ai_summary?"Yes":"No"]})]})]})]}),u&&(0,r.jsxs)("div",{className:"border rounded-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Content Extraction"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:["POST /api/articles/","{id}","/fetch-content - Extract full article content"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("button",{onClick:b,disabled:"content"===m||!u.url,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:"content"===m?"Extracting...":"Extract Content"}),l&&r.jsx("pre",{className:"bg-gray-100 p-4 rounded overflow-auto text-xs max-h-64",children:JSON.stringify(l,null,2)})]})]}),u&&(0,r.jsxs)("div",{className:"border rounded-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"AI Summarization"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:["POST /api/articles/","{id}","/summarize - Generate AI summary"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("button",{onClick:j,disabled:"summary"===m,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:"summary"===m?"Generating...":"Generate Summary"}),o&&(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("pre",{className:"bg-gray-100 p-4 rounded overflow-auto text-xs max-h-64",children:JSON.stringify(o,null,2)}),o.data?.summary&&(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded",children:[r.jsx("h4",{className:"font-semibold mb-2",children:"Generated Summary:"}),r.jsx("p",{className:"text-sm",children:o.data.summary})]})]})]})]}),(0,r.jsxs)("div",{className:"border rounded-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"API Documentation"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"US-103 Implementation Details"}),(0,r.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-semibold",children:"✅ Completed Endpoints:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-gray-600",children:[r.jsx("li",{children:"POST /api/sync - Trigger manual sync (with rate limiting)"}),r.jsx("li",{children:"GET /api/sync/status/:id - Check sync progress"}),r.jsx("li",{children:"POST /api/articles/:id/fetch-content - Extract full content using Mozilla Readability"}),r.jsx("li",{children:"POST /api/articles/:id/summarize - Generate AI summary using Claude 4 Sonnet"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-semibold",children:"✅ Features Implemented:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-gray-600",children:[r.jsx("li",{children:"Rate limiting (100 calls/day for Inoreader API)"}),r.jsx("li",{children:"Proper error codes (429 for rate limit, 404 for not found, 500 for server errors)"}),r.jsx("li",{children:"Consistent JSON response format"}),r.jsx("li",{children:"API usage tracking in api_usage table"}),r.jsx("li",{children:"Content caching to avoid repeated extractions"}),r.jsx("li",{children:"Summary caching with regeneration option"})]})]})]})]})]})}},3344:(e,s,t)=>{"use strict";t.d(s,{OQ:()=>l});var r=t(1952);let a="https://rgfxyraamghqnechkppg.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJnZnh5cmFhbWdocW5lY2hrcHBnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI2ODg5NzAsImV4cCI6MjA2ODI2NDk3MH0.hqoXq2YAs6cc96d0baVjZWVdmDW0qytCIHjA-YffSdk";if(!a||!i)throw Error("Missing Supabase environment variables");console.log("[Supabase] Initializing client...");let n=performance.now(),l=(0,r.eI)(a,i,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},db:{schema:"public"}});console.log(`[Supabase] Client initialized in ${(performance.now()-n).toFixed(2)}ms`)},3764:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`/Users/shayon/DevProjects/rss-news-reader/src/app/test-server-api/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[9276,4465,4168],()=>t(2297));module.exports=r})();