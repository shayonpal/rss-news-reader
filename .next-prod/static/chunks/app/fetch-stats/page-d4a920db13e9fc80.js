(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[529],{7792:function(e,t,s){Promise.resolve().then(s.bind(s,3234))},9205:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var a=s(2265);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ")};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:c="",children:o,iconNode:m,...x}=e;return(0,a.createElement)("svg",{ref:t,...i,width:r,height:r,stroke:s,strokeWidth:d?24*Number(l)/Number(r):l,className:n("lucide",c),...x},[...m.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(o)?o:[o]])}),d=(e,t)=>{let s=(0,a.forwardRef)((s,i)=>{let{className:d,...c}=s;return(0,a.createElement)(l,{ref:i,iconNode:t,className:n("lucide-".concat(r(e)),d),...c})});return s.displayName="".concat(e),s}},2660:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},407:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},7168:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},3234:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var a=s(7437),r=s(2265),n=s(9376),i=s(7168);let l=(0,s(9205).Z)("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);var d=s(2660),c=s(875),o=s(407),m=s(4784),x=s(6682),h=s(3448);function u(){let e=(0,n.useRouter)(),[t,s]=(0,r.useState)(null),[u,g]=(0,r.useState)(!0),[f,y]=(0,r.useState)(null),[v,p]=(0,r.useState)(new Set);(0,r.useEffect)(()=>{j()},[]);let j=async()=>{try{g(!0);let e=await fetch("/reader/api/analytics/fetch-stats");if(!e.ok)throw Error("Failed to fetch stats");let t=await e.json();s(t)}catch(e){y(e instanceof Error?e.message:"Failed to load stats")}finally{g(!1)}},b=e=>{p(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},N=e=>null===e?"N/A":e<1e3?"".concat(Math.round(e),"ms"):"".concat((e/1e3).toFixed(1),"s"),k=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Attempts"}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-semibold",children:e.total}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:[(0,a.jsx)(i.Z,{className:"inline w-3 h-3 mr-1"}),e.auto.total,(0,a.jsx)("span",{className:"mx-1",children:"•"}),(0,a.jsx)(l,{className:"inline w-3 h-3 mr-1"}),e.manual.total]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Success"}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"font-semibold text-green-600 dark:text-green-400",children:[e.successful,t&&e.total>0&&(0,a.jsxs)("span",{className:"ml-1 text-sm",children:["(",e.successRate,"%)"]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:[(0,a.jsx)(i.Z,{className:"inline w-3 h-3 mr-1"}),e.auto.successful,(0,a.jsx)("span",{className:"mx-1",children:"•"}),(0,a.jsx)(l,{className:"inline w-3 h-3 mr-1"}),e.manual.successful]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Failed"}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:(0,h.cn)("font-semibold",e.failed>0?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"),children:[e.failed,t&&e.total>0&&e.failed>0&&(0,a.jsxs)("span",{className:"ml-1 text-sm",children:["(",(e.failed/e.total*100).toFixed(1),"%)"]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-500",children:[(0,a.jsx)(i.Z,{className:"inline w-3 h-3 mr-1"}),e.auto.failed,(0,a.jsx)("span",{className:"mx-1",children:"•"}),(0,a.jsx)(l,{className:"inline w-3 h-3 mr-1"}),e.manual.failed]})]})]})]})};return u?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-gray-300 border-t-gray-600 dark:border-gray-600 dark:border-t-gray-300"})})}):f||!t?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-red-600 dark:text-red-400",children:f||"Failed to load stats"}),(0,a.jsx)("button",{onClick:j,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]})})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,a.jsx)("header",{className:"fixed top-0 left-0 right-0 z-10 bg-background border-b",children:(0,a.jsxs)("div",{className:"flex items-center h-[60px] px-4",children:[(0,a.jsx)(m.M,{onClick:()=>e.back(),className:"mr-3",children:(0,a.jsx)(d.Z,{className:"w-5 h-5"})}),(0,a.jsx)("h1",{className:"text-lg font-semibold",children:"Fetch Statistics"})]})}),(0,a.jsx)("div",{className:"h-[60px]"}),(0,a.jsxs)("div",{className:"p-4 space-y-6 pb-20",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"OVERALL STATISTICS"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Today"}),k(t.overall.today)]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"This Month"}),k(t.overall.thisMonth)]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Lifetime"}),k(t.overall.lifetime)]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"FEEDS WITH ACTIVITY"}),(0,a.jsx)("div",{className:"space-y-2",children:t.feeds.filter(e=>e.lifetime.total>0).map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:[(0,a.jsxs)("button",{onClick:()=>b(e.feedId),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[v.has(e.feedId)?(0,a.jsx)(c.Z,{className:"w-4 h-4 mr-2"}):(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),(0,a.jsx)("span",{className:"font-medium",children:e.feedTitle})]}),(0,a.jsxs)("span",{className:(0,h.cn)("text-sm font-medium",e.lifetime.successRate>=95?"text-green-600 dark:text-green-400":e.lifetime.successRate>=80?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"),children:[e.lifetime.successRate,"% success"]})]}),v.has(e.feedId)&&(0,a.jsxs)("div",{className:"px-4 pb-4 grid grid-cols-3 gap-4 border-t border-gray-200 dark:border-gray-700 pt-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Today"}),k(e.today,!1),null!==e.today.avgDurationMs&&(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["Avg: ",N(e.today.avgDurationMs)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"This Month"}),k(e.thisMonth,!1),null!==e.thisMonth.avgDurationMs&&(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["Avg: ",N(e.thisMonth.avgDurationMs)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Lifetime"}),k(e.lifetime,!1),null!==e.lifetime.avgDurationMs&&(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["Avg: ",N(e.lifetime.avgDurationMs)]})]})]})]},e.feedId))})]}),(t.topIssues.problematicFeeds.length>0||t.topIssues.recentFailures.length>0)&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"TOP ISSUES THIS MONTH"}),t.topIssues.problematicFeeds.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Most Problematic Feeds:"}),(0,a.jsx)("ul",{className:"space-y-1",children:t.topIssues.problematicFeeds.map((e,t)=>(0,a.jsxs)("li",{className:"text-sm",children:["• ",e.feedTitle," (",e.failureCount," failures)"]},t))})]}),t.topIssues.recentFailures.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Recent Failed Articles:"}),(0,a.jsx)("div",{className:"space-y-3",children:t.topIssues.recentFailures.map((e,t)=>(0,a.jsxs)("div",{className:"border-l-2 border-red-400 pl-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium line-clamp-1",children:e.articleTitle}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.feedTitle," • ",(0,x.Q)(new Date(e.timestamp),{addSuffix:!0})]}),e.errorReason&&(0,a.jsx)("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:e.errorReason})]},t))})]})]})]})]})}},2381:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var a=s(7437),r=s(2265),n=s(7053),i=s(535),l=s(3448);let d=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:s,variant:r,size:i,asChild:c=!1,...o}=e,m=c?n.g7:"button";return(0,a.jsx)(m,{className:(0,l.cn)(d({variant:r,size:i,className:s})),ref:t,type:o.type||"button",...o,style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation",...o.style}})});c.displayName="Button"},4784:function(e,t,s){"use strict";s.d(t,{M:function(){return i}});var a=s(7437),r=s(2265),n=s(2381);let i=r.forwardRef((e,t)=>{let{onPress:s,onClick:i,children:l,...d}=e,c=(0,r.useRef)(!1);return(0,a.jsx)(n.z,{ref:t,...d,onClick:e=>{if(e.stopPropagation(),c.current){e.preventDefault(),c.current=!1;return}i?i(e):s&&s()},onTouchStart:()=>{c.current=!0},onTouchEnd:e=>{e.preventDefault(),e.stopPropagation(),s?s():i&&i(e),c.current=!1},style:{...d.style,WebkitTouchCallout:"none",WebkitUserSelect:"none",touchAction:"manipulation"},children:l})});i.displayName="IOSButton"},3448:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(1994),r=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}}},function(e){e.O(0,[569,541,971,117,744],function(){return e(e.s=7792)}),_N_E=e.O()}]);